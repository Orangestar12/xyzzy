<!DOCTYPE html>
<html>
<head>
    <meta content=">list" property="og:title"/>
    <meta content="This bot sure has a ton of games..." property="og:description"/>
    <meta content="http://orangestar.dev/xyzzy/icon_alt.png" property="og:image"/>
    <link rel="icon" type="image/png" href="./icon_alt.png">
    <link rel="stylesheet" href="./main.css"/>
    <title>xyzzy full game list</title>
</head>
<body>
    <header>xyzzy game list</header>
    <h1>Here are all the games available on xyzzy:</h2>
    <ul id=game_list>
        <li>Fetching...</li>
        <li>(You may need to have JavaScript enabled to do this)</li>
    </ul>
</body>
<script>
  var http_req = new XMLHttpRequest();
  var url = "https://gist.githubusercontent.com/Orangestar12/71d9d9fed77ef81b82c66b92591b80e7/raw/xyzzy_games.json";
  http_req.open("GET", url, false);
  http_req.send(null);

  var json_data = JSON.parse(http_req.responseText);
  const GAMES = document.getElementById("game_list");
  
  while(GAMES.firstChild) {
    GAMES.firstChild.remove();
  }

  for(let item of json_data) {
    let list_item = document.createElement('li');
    if(item[1]!==null){
      let link = document.createElement('a');
      link.setAttribute('href', item[1]);
      link.textContent = item[0];
      list_item.append(link);
    } else {
      list_item.textContent = item[0];
    }
    GAMES.append(list_item);
  }
</script>
</html>
